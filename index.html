<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Calculadora Estratégica de Faltas por Clase</title>
<link rel="stylesheet" href="estilos.css">
<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f4f4;
  padding: 20px;
}
.container {
  background: white;
  padding: 20px;
  border-radius: 10px;
  max-width: 800px;
  margin: auto;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  margin-bottom: 20px;
}
.class-container {
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 15px;
  margin-bottom: 20px;
  background-color: #f9f9f9;
}
.class-header {
  background-color: #0077cc;
  color: white;
  padding: 10px;
  border-radius: 5px;
  margin-bottom: 15px;
}
.schedule-table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 15px;
}
.schedule-table th, .schedule-table td {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: center;
}
.schedule-table th {
  background-color: #f2f2f2;
}
.schedule-day {
  font-weight: bold;
}
input, button, select {
  padding: 8px;
  margin: 5px 0 15px 0;
  width: 100%;
  box-sizing: border-box;
}
button {
  background-color: #0077cc;
  color: white;
  border: none;
  cursor: pointer;
}
button:hover {
  background-color: #005fa3;
}
.calculate-btn {
  background-color: #28a745;
}
.calculate-btn:hover {
  background-color: #218838;
}
p strong {
  color: #0077cc;
}
.error {
  color: red;
  font-weight: bold;
}
.success {
  color: green;
  font-weight: bold;
}
.class-result {
  background-color: #e9f7ef;
  padding: 10px;
  border-radius: 5px;
  margin-top: 10px;
}
.email-link {
  color: #0077cc;
  text-decoration: none;
}
.email-link:hover {
  text-decoration: underline;
}
</style>
</head>
<body>

<h1 style="text-align: center; color: #0077cc;">Calculadora Estratégica de Faltas por Clase</h1>
<p style="text-align: center;">Carrera: TSU - Desarrollo de Software Multiplataforma | Grupo: 2ª8 Matutino | Periodo: MAYO - AGOSTO 2025</p>

<div class="container">
    <h2>Configuración General</h2>
    <form>
        <label for="fechaInicio">Fecha de inicio de clases:</label>
        <input type="date" id="fechaInicio" required>

        <label for="fechaFin">Fecha de fin de clases:</label>
        <input type="date" id="fechaFin" required>

        <label for="asistenciaMinima">Asistencia mínima exigida (%):</label>
        <input type="number" id="asistenciaMinima" value="80" required>

        <button type="button" onclick="llenarDatosUTJ()">Llenar datos UTJ</button>
    </form>
</div>

<!-- Clase: Probabilidad y Estadística -->
<div class="container class-container">
    <div class="class-header">
        <h3>Probabilidad y Estadística</h3>
        <p>Profesor: ERNESTO ROQUE RODRIGUEZ | <a href="mailto:emesto.roque@ufj.edu.mx" class="email-link">emesto.roque@ufj.edu.mx</a></p>
    </div>
    
    <table class="schedule-table">
        <tr>
            <th>Día</th>
            <th>Hora</th>
            <th>Aula</th>
        </tr>
        <tr>
            <td class="schedule-day">Lunes</td>
            <td>7:00-7:50</td>
            <td>5-01</td>
        </tr>
        <tr>
            <td class="schedule-day">Lunes</td>
            <td>7:50-8:40</td>
            <td>5-01</td>
        </tr>
        <tr>
            <td class="schedule-day">Martes</td>
            <td>7:50-8:40</td>
            <td>5-01</td>
        </tr>
        <tr>
            <td class="schedule-day">Miércoles</td>
            <td>12:30-13:20</td>
            <td>5-01</td>
        </tr>
        <tr>
            <td class="schedule-day">Miércoles</td>
            <td>13:20-14:10</td>
            <td>5-01</td>
        </tr>
    </table>
    
    <form class="class-form">
        <label for="asistenciaActual_PE">Tu porcentaje actual de asistencia (%):</label>
        <input type="number" id="asistenciaActual_PE" placeholder="Ejemplo: 92" required>
        
        <button type="button" class="calculate-btn" onclick="calcularEstrategia('PE', 5)">Calcular Estrategia para esta Clase</button>
    </form>
    
    <div id="resultado_PE" class="class-result"></div>
</div>

<!-- Clase: Habilidades Socioemocionales y Manejo de Conflictos -->
<div class="container class-container">
    <div class="class-header">
        <h3>Habilidades Socioemocionales y Manejo de Conflictos</h3>
        <p>Profesora: JOSEFINA ASTRID GOMEZ SAHAGUN | <a href="mailto:agomezs@ufj.edu.mx" class="email-link">agomezs@ufj.edu.mx</a></p>
    </div>
    
    <table class="schedule-table">
        <tr>
            <th>Día</th>
            <th>Hora</th>
            <th>Aula</th>
        </tr>
        <tr>
            <td class="schedule-day">Miércoles</td>
            <td>7:00-7:50</td>
            <td>5-01</td>
        </tr>
        <tr>
            <td class="schedule-day">Miércoles</td>
            <td>7:50-8:40</td>
            <td>5-01</td>
        </tr>
        <tr>
            <td class="schedule-day">Martes</td>
            <td>9:10-10:00</td>
            <td>5-01</td>
        </tr>
        <tr>
            <td class="schedule-day">Martes</td>
            <td>10:00-10:50</td>
            <td>5-01</td>
        </tr>
    </table>
    
    <form class="class-form">
        <label for="asistenciaActual_HS">Tu porcentaje actual de asistencia (%):</label>
        <input type="number" id="asistenciaActual_HS" placeholder="Ejemplo: 92" required>
        
        <button type="button" class="calculate-btn" onclick="calcularEstrategia('HS', 4)">Calcular Estrategia para esta Clase</button>
    </form>
    
    <div id="resultado_HS" class="class-result"></div>
</div>

<!-- Clase: Inglés II -->
<div class="container class-container">
    <div class="class-header">
        <h3>Inglés II</h3>
        <p>Profesora: TANIA SARAI JAUREGUI LOPEZ | <a href="mailto:tania.jauregui@ufj.edu.mx" class="email-link">tania.jauregui@ufj.edu.mx</a></p>
    </div>
    
    <table class="schedule-table">
        <tr>
            <th>Día</th>
            <th>Hora</th>
            <th>Aula</th>
        </tr>
        <tr>
            <td class="schedule-day">Viernes</td>
            <td>7:00-7:50</td>
            <td>5-01</td>
        </tr>
        <tr>
            <td class="schedule-day">Viernes</td>
            <td>7:50-8:40</td>
            <td>5-01</td>
        </tr>
        <tr>
            <td class="schedule-day">Lunes</td>
            <td>9:10-10:00</td>
            <td>5-01</td>
        </tr>
        <tr>
            <td class="schedule-day">Miércoles</td>
            <td>9:10-10:00</td>
            <td>5-01</td>
        </tr>
        <tr>
            <td class="schedule-day">Miércoles</td>
            <td>10:00-10:50</td>
            <td>5-01</td>
        </tr>
    </table>
    
    <form class="class-form">
        <label for="asistenciaActual_IN">Tu porcentaje actual de asistencia (%):</label>
        <input type="number" id="asistenciaActual_IN" placeholder="Ejemplo: 92" required>
        
        <button type="button" class="calculate-btn" onclick="calcularEstrategia('IN', 5)">Calcular Estrategia para esta Clase</button>
    </form>
    
    <div id="resultado_IN" class="class-result"></div>
</div>

<!-- Clase: Conmutación y Enrutamiento de Redes -->
<div class="container class-container">
    <div class="class-header">
        <h3>Conmutación y Enrutamiento de Redes</h3>
        <p>Profesora: ANDREA VILLASEÑOR SAHAGUN | <a href="mailto:andrea.villasenor@ufj.edu.mx" class="email-link">andrea.villasenor@ufj.edu.mx</a></p>
    </div>
    
    <table class="schedule-table">
        <tr>
            <th>Día</th>
            <th>Hora</th>
            <th>Aula</th>
        </tr>
        <tr>
            <td class="schedule-day">Jueves</td>
            <td>7:50-8:40</td>
            <td>M-02</td>
        </tr>
        <tr>
            <td class="schedule-day">Viernes</td>
            <td>9:10-10:00</td>
            <td>M-13</td>
        </tr>
        <tr>
            <td class="schedule-day">Viernes</td>
            <td>10:00-10:50</td>
            <td>M-13</td>
        </tr>
        <tr>
            <td class="schedule-day">Lunes</td>
            <td>11:40-12:30</td>
            <td>M-02</td>
        </tr>
        <tr>
            <td class="schedule-day">Lunes</td>
            <td>12:30-13:20</td>
            <td>M-02</td>
        </tr>
    </table>
    
    <form class="class-form">
        <label for="asistenciaActual_CE">Tu porcentaje actual de asistencia (%):</label>
        <input type="number" id="asistenciaActual_CE" placeholder="Ejemplo: 92" required>
        
        <button type="button" class="calculate-btn" onclick="calcularEstrategia('CE', 5)">Calcular Estrategia para esta Clase</button>
    </form>
    
    <div id="resultado_CE" class="class-result"></div>
</div>

<!-- Clase: Programación Estructurada -->
<div class="container class-container">
    <div class="class-header">
        <h3>Programación Estructurada</h3>
        <p>Profesor: OMAR ZARAÏE NAVARRO | <a href="mailto:azarate@ufj.edu.mx" class="email-link">azarate@ufj.edu.mx</a></p>
    </div>
    
    <table class="schedule-table">
        <tr>
            <th>Día</th>
            <th>Hora</th>
            <th>Aula</th>
        </tr>
        <tr>
            <td class="schedule-day">Jueves</td>
            <td>9:10-10:00</td>
            <td>M-05</td>
        </tr>
        <tr>
            <td class="schedule-day">Jueves</td>
            <td>10:00-10:50</td>
            <td>M-05</td>
        </tr>
        <tr>
            <td class="schedule-day">Lunes</td>
            <td>10:00-10:50</td>
            <td>M-02</td>
        </tr>
        <tr>
            <td class="schedule-day">Lunes</td>
            <td>10:50-11:40</td>
            <td>M-02</td>
        </tr>
        <tr>
            <td class="schedule-day">Martes</td>
            <td>10:50-11:40</td>
            <td>M-02</td>
        </tr>
    </table>
    
    <form class="class-form">
        <label for="asistenciaActual_PR">Tu porcentaje actual de asistencia (%):</label>
        <input type="number" id="asistenciaActual_PR" placeholder="Ejemplo: 92" required>
        
        <button type="button" class="calculate-btn" onclick="calcularEstrategia('PR', 5)">Calcular Estrategia para esta Clase</button>
    </form>
    
    <div id="resultado_PR" class="class-result"></div>
</div>

<!-- Clase: Sistemas Operativos -->
<div class="container class-container">
    <div class="class-header">
        <h3>Sistemas Operativos</h3>
        <p>Profesor: HECTOR ORLANDO GOMEZ CASTELLANOS | <a href="mailto:hgomez@ufj.edu.mx" class="email-link">hgomez@ufj.edu.mx</a></p>
    </div>
    
    <table class="schedule-table">
        <tr>
            <th>Día</th>
            <th>Hora</th>
            <th>Aula</th>
        </tr>
        <tr>
            <td class="schedule-day">Miércoles</td>
            <td>10:50-11:40</td>
            <td>M-02</td>
        </tr>
        <tr>
            <td class="schedule-day">Miércoles</td>
            <td>11:40-12:30</td>
            <td>M-02</td>
        </tr>
        <tr>
            <td class="schedule-day">Jueves</td>
            <td>10:50-11:40</td>
            <td>M-05</td>
        </tr>
        <tr>
            <td class="schedule-day">Jueves</td>
            <td>11:40-12:30</td>
            <td>M-05</td>
        </tr>
        <tr>
            <td class="schedule-day">Viernes</td>
            <td>11:40-12:30</td>
            <td>M-05</td>
        </tr>
    </table>
    
    <form class="class-form">
        <label for="asistenciaActual_SO">Tu porcentaje actual de asistencia (%):</label>
        <input type="number" id="asistenciaActual_SO" placeholder="Ejemplo: 92" required>
        
        <button type="button" class="calculate-btn" onclick="calcularEstrategia('SO', 5)">Calcular Estrategia para esta Clase</button>
    </form>
    
    <div id="resultado_SO" class="class-result"></div>
</div>

<!-- Clase: Cálculo Diferencial -->
<div class="container class-container">
    <div class="class-header">
        <h3>Cálculo Diferencial</h3>
        <p>Profesora: BRONISLAVA FRANCO LLAMAS | <a href="mailto:bronislava.franco@ufj.edu.mx" class="email-link">bronislava.franco@ufj.edu.mx</a></p>
    </div>
    
    <table class="schedule-table">
        <tr>
            <th>Día</th>
            <th>Hora</th>
            <th>Aula</th>
        </tr>
        <tr>
            <td class="schedule-day">Martes</td>
            <td>11:40-12:30</td>
            <td>5-01</td>
        </tr>
        <tr>
            <td class="schedule-day">Martes</td>
            <td>12:30-13:20</td>
            <td>5-01</td>
        </tr>
        <tr>
            <td class="schedule-day">Jueves</td>
            <td>12:30-13:20</td>
            <td>5-01</td>
        </tr>
        <tr>
            <td class="schedule-day">Jueves</td>
            <td>13:20-14:10</td>
            <td>5-01</td>
        </tr>
        <tr>
            <td class="schedule-day">Viernes</td>
            <td>12:30-13:20</td>
            <td>5-01</td>
        </tr>
        <tr>
            <td class="schedule-day">Viernes</td>
            <td>13:20-14:10</td>
            <td>5-01</td>
        </tr>
    </table>
    
    <form class="class-form">
        <label for="asistenciaActual_CD">Tu porcentaje actual de asistencia (%):</label>
        <input type="number" id="asistenciaActual_CD" placeholder="Ejemplo: 92" required>
        
        <button type="button" class="calculate-btn" onclick="calcularEstrategia('CD', 6)">Calcular Estrategia para esta Clase</button>
    </form>
    
    <div id="resultado_CD" class="class-result"></div>
</div>

<script>
function calcularEstrategia(claseId, diasPorSemana) {
    const fechaInicio = new Date(document.getElementById("fechaInicio").value);
    const fechaFin = new Date(document.getElementById("fechaFin").value);
    const asistenciaMinima = parseFloat(document.getElementById("asistenciaMinima").value);
    const asistenciaActual = parseFloat(document.getElementById(`asistenciaActual_${claseId}`).value);

    if (isNaN(fechaInicio) || isNaN(fechaFin) || diasPorSemana <= 0 || asistenciaMinima <= 0 || asistenciaActual < 0) {
        document.getElementById(`resultado_${claseId}`).innerHTML = "<p class='error'>Completa todos los campos correctamente.</p>";
        return;
    }

    const hoy = new Date();
    if (hoy < fechaInicio) {
        document.getElementById(`resultado_${claseId}`).innerHTML = "<p class='error'>El ciclo aún no inicia.</p>";
        return;
    }

    const msPorDia = 1000 * 60 * 60 * 24;
    const totalSemanas = Math.ceil((fechaFin - fechaInicio) / msPorDia / 7);
    const semanasCursadas = Math.floor((hoy - fechaInicio) / msPorDia / 7);
    const semanasRestantes = totalSemanas - semanasCursadas;

    const clasesTotales = totalSemanas * diasPorSemana;
    const clasesDadas = semanasCursadas * diasPorSemana;
    const clasesRestantes = clasesTotales - clasesDadas;

    const asistenciasRequeridas = Math.ceil(clasesTotales * (asistenciaMinima / 100));
    const faltasPermitidas = clasesTotales - asistenciasRequeridas;

    // Calcular faltas consumidas a partir del porcentaje actual
    const asistenciasHastaHoy = Math.round(clasesDadas * (asistenciaActual / 100));
    const faltasConsumidas = clasesDadas - asistenciasHastaHoy;
    const faltasRestantes = faltasPermitidas - faltasConsumidas;

    const faltasPorSemana = (faltasRestantes / semanasRestantes).toFixed(2);

    let mensaje = `
        <p>Clases totales en el curso: <strong>${clasesTotales}</strong></p>
        <p>Clases que debiste tener hasta hoy: <strong>${clasesDadas}</strong></p>
        <p>Asistencias mínimas necesarias (para ${asistenciaMinima}%): <strong>${asistenciasRequeridas}</strong></p>
        <p>Máx. faltas permitidas en todo el curso: <strong>${faltasPermitidas}</strong></p>
        <hr>
        <p>Con tu asistencia actual de <strong>${asistenciaActual}%</strong>:</p>
        <p>Asistencias hasta hoy: <strong>${asistenciasHastaHoy}</strong></p>
        <p>Faltas consumidas hasta hoy: <strong>${faltasConsumidas}</strong></p>
        <p>Faltas que puedes gastar todavía: <strong>${faltasRestantes >= 0 ? faltasRestantes : 0}</strong></p>
        <p>Proyección: puedes faltar aprox. <strong>${faltasPorSemana}</strong> veces por semana hasta terminar.</p>
    `;

    if (faltasRestantes < 0) {
        mensaje += "<p class='error'>¡Ya superaste las faltas máximas! Debes asistir a todo para no reprobar.</p>";
    } else if (faltasRestantes == 0) {
        mensaje += "<p class='error'>¡No puedes faltar más! Debes asistir a todas las clases restantes.</p>";
    } else {
        mensaje += "<p class='success'>Todavía tienes margen para faltar, pero úsalo sabiamente.</p>";
    }

    document.getElementById(`resultado_${claseId}`).innerHTML = mensaje;
}

function llenarDatosUTJ() {
    document.getElementById("fechaInicio").value = "2025-05-02";
    document.getElementById("fechaFin").value = "2025-08-29";
    document.getElementById("asistenciaMinima").value = 80;

    alert("Datos UTJ cargados:\nInicio: 2 mayo 2025\nFin: 29 agosto 2025\nAsistencia mínima: 80%");
}
</script>

</body>
</html>